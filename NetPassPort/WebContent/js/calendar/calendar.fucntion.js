/*
 * File: MyStore.js Date: Fri Jul 16 2010 12:08:02 GMT+0800 ()
 * 
 * This file was generated by Ext Designer version xds-1.0.2.2.
 * http://www.extjs.com/products/designer/
 * 
 * This file will be auto-generated each and everytime you export.
 * 
 * Do NOT hand edit this file.
 */
initData = function(date) {

	Ext.Ajax.request({
				url : 'AjaxPortal',
				callback : function() {
					Ext.Msg.hide();
					// Ext.getCmp('DetilPanel').setDisabled(false);
				},
				success : function(response) {
					var json = parserJSON(response.responseText);

					for (var i = 0; i < json['responseData'][0].length; i++) {
						var itemInfo = json['responseData'][0][i];
						var msgInfo = json['responseData'][1][i];
						if (itemInfo['item_count'] == 0) {
							continue;
						}

						Ext
								.getCmp("itemInfoLabel_" + itemInfo['date_str'])
								.setText(
										"<img src='./resources/mogan/images/1271299827_yahoo_protocol.png' />"
												+ itemInfo['item_count'], false);
						Ext.getCmp("msgInfoLabel_" + msgInfo['date_str'])
								.setText(
										"<img src='./resources/mogan/images/1271300305_message.png' />"
												+ msgInfo['msg_count'] + "/"
												+ msgInfo['msg_unread_count'],
										false);
					}
				},
				failure : function(response) {
					Ext.Msg.alert("錯誤", "請向程式開發者詢問");
				},
				params : {
					APP_ID : appId,
					ACTION : "BID_INFO",
					RETURN_TYPE : "JSON",
					MODEL_NAME : "BM2",
					DATAS : date
				}
			});
}

query = function(date) {

}

queryDateInfo = function(date) {
	Ext.Ajax.request({
				url : 'AjaxPortal',
				callback : function() {
					Ext.Msg.hide();
				},
				success : function(response) {
					var json = parserJSON(response.responseText);
					if (json['responseRecords'] == 0) {

					} else {
						itemStoreData['root'] = json['responseData'];
						Ext.getCmp('BidList_unreadList').getStore().load();
						Ext.getCmp('BidList_unreadList').getStore().filter(
								"msg_unread_count", /^[1-9]/);
						Ext.getCmp('BidList_readList').getStore().load();
						Ext.getCmp('BidList_readList').getStore().filter(
								"msg_unread_count", /^0/);
					}
					Ext.getCmp('BidList_unreadList').setTitle('未讀取訊息('
							+ Ext.getCmp('BidList_unreadList').getStore()
									.getCount() + ')');
					Ext.getCmp('BidList_readList').setTitle('已讀取訊息('
							+ Ext.getCmp('BidList_readList').getStore()
									.getCount() + ')');
				},
				failure : function(response) {
					Ext.Msg.alert("錯誤", "請向程式開發者詢問");
				},
				params : {
					APP_ID : appId,
					ACTION : "MSG_INFO",
					RETURN_TYPE : "JSON",
					MODEL_NAME : "BM2",
					DATAS : date
				}
			});
}

query = function() {
	Ext.Ajax.request({
				url : 'AjaxPortal',
				callback : function() {
					Ext.Msg.hide();
					// Ext.getCmp('DetilPanel').setDisabled(false);
				},
				success : function(response) {
					var json = parserJSON(response.responseText);
					alert(json['responseData'][0]);
					itemStoreData = json;
					Ext.getCmp('DataForm').getStore().load();

				},
				failure : function(response) {
					Ext.Msg.alert("錯誤", "請向程式開發者詢問");
				},
				params : {
					APP_ID : appId,
					ACTION : "WON_DATA",
					RETURN_TYPE : "JSON",
					MODEL_NAME : "DATA_FINDER",
					DATAS : Ext.encode(Ext.getCmp('conditionForm').getForm()
							.getValues())
				}
			});
	// alert(Ext.getCmp('conditionForm'));
}